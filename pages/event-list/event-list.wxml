<!--pages/event-list/event-list.wxml-->
<view class="page">
  <!-- å¤´éƒ¨æ“ä½œåŒº -->
  <view class="header-actions" wx:if="{{isAdmin}}">
    <button class="btn-primary create-btn" bindtap="goToCreateEvent">
      <text class="btn-icon">â•</text>
      <text>åˆ›å»ºè®­ç»ƒ</text>
    </button>
  </view>

  <!-- è®­ç»ƒåˆ—è¡¨ -->
  <view class="event-list" wx:if="{{!isLoading}}">
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{eventList.length === 0}}">
      <view class="empty-icon">ğŸ“…</view>
      <text class="empty-text">æš‚æ— è®­ç»ƒå®‰æ’</text>
      <button class="btn-secondary" wx:if="{{isAdmin}}" bindtap="goToCreateEvent">
        åˆ›å»ºç¬¬ä¸€ä¸ªè®­ç»ƒ
      </button>
    </view>

    <!-- è®­ç»ƒå¡ç‰‡åˆ—è¡¨ -->
    <view class="event-item card" 
          wx:for="{{eventList}}" 
          wx:key="_id"
          bindtap="goToEventDetail"
          data-id="{{item._id}}">
      
      <!-- è®­ç»ƒæ ‡é¢˜å’ŒçŠ¶æ€ -->
      <view class="event-header">
        <text class="event-title">{{item.title}}</text>
        <view class="event-status {{item.status}}">
          <text>{{item.status === 'registering' ? 'æŠ¥åä¸­' : 'å·²ç»“æŸ'}}</text>
        </view>
      </view>

      <!-- è®­ç»ƒä¿¡æ¯ -->
      <view class="event-info">
        <view class="info-item">
          <text class="info-icon">ğŸ•</text>
          <text class="info-text">{{item.eventTime}}</text>
        </view>
        
        <view class="info-item">
          <text class="info-icon">ğŸ“</text>
          <text class="info-text">{{item.location}}</text>
        </view>
      </view>

      <!-- è®­ç»ƒå†…å®¹é¢„è§ˆ -->
      <view class="event-content" wx:if="{{item.content}}">
        <text class="content-text">{{item.content}}</text>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="event-actions">
        <text class="action-hint">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</text>
        <text class="action-arrow">â†’</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{isLoading}}">
    <view class="loading-icon">â³</view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>
