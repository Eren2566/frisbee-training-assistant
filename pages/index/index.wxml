<!--pages/index/index.wxml-->
<view class="page">
  <!-- 头部欢迎区域 -->
  <view class="header">
    <view class="welcome-text">
      <text class="title">FlyMate</text>
      <text class="subtitle">Your Ultimate Frisbee Companion</text>
    </view>
  </view>

  <!-- 登录状态显示 -->
  <view class="card" wx:if="{{isLoggedIn}}">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="nickname">{{userInfo.discName || userInfo.nickName || '未知用户'}}</text>
        <text class="role">{{userInfo.role === 'admin' ? '队长' : '队员'}}</text>
      </view>
    </view>
  </view>

  <!-- 未登录提示 -->
  <view class="card" wx:else>
    <view class="login-prompt">
      <text class="prompt-text">请先登录以使用完整功能</text>
      <button class="btn-primary" bindtap="goToLogin">立即登录</button>
    </view>
  </view>

  <!-- 功能导航 -->
  <view class="function-nav" wx:if="{{isLoggedIn}}">
    <view class="nav-item" bindtap="goToEventList">
      <view class="nav-icon">📅</view>
      <view class="nav-content">
        <text class="nav-text">训练安排</text>
        <text class="nav-desc">查看最新训练计划</text>
      </view>
    </view>

    <view class="nav-item" bindtap="goToProfile">
      <view class="nav-icon">👤</view>
      <view class="nav-content">
        <text class="nav-text">个人中心</text>
        <text class="nav-desc">查看出勤记录</text>
      </view>
    </view>
  </view>

  <!-- 快速操作 -->
  <view class="quick-actions" wx:if="{{isLoggedIn}}">
    <text class="section-title">快速操作</text>
    <view class="action-buttons">
      <button class="btn-secondary" bindtap="goToEventList">查看训练</button>
      <button class="btn-secondary" wx:if="{{userInfo.role === 'admin'}}" bindtap="goToCreateEvent">创建训练</button>
    </view>
  </view>
</view>
