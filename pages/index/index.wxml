<!--pages/index/index.wxml-->
<view class="page">
  <!-- å¤´éƒ¨æ¬¢è¿åŒºåŸŸ -->
  <view class="header">
    <view class="welcome-text">
      <text class="title">FlyMate</text>
      <text class="subtitle">Your Ultimate Frisbee Companion</text>
    </view>
  </view>

  <!-- ç™»å½•çŠ¶æ€æ˜¾ç¤º -->
  <view class="card" wx:if="{{isLoggedIn}}">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="nickname">{{userInfo.discName || userInfo.nickName || 'æœªçŸ¥ç”¨æˆ·'}}</text>
        <text class="role">{{userInfo.role === 'admin' ? 'é˜Ÿé•¿' : 'é˜Ÿå‘˜'}}</text>
      </view>
    </view>
  </view>

  <!-- æœªç™»å½•æç¤º -->
  <view class="card" wx:else>
    <view class="login-prompt">
      <text class="prompt-text">è¯·å…ˆç™»å½•ä»¥ä½¿ç”¨å®Œæ•´åŠŸèƒ½</text>
      <button class="btn-primary" bindtap="goToLogin">ç«‹å³ç™»å½•</button>
    </view>
  </view>

  <!-- åŠŸèƒ½å¯¼èˆª -->
  <view class="function-nav" wx:if="{{isLoggedIn}}">
    <view class="nav-item" bindtap="goToEventList">
      <view class="nav-icon">ğŸ“…</view>
      <view class="nav-content">
        <text class="nav-text">è®­ç»ƒå®‰æ’</text>
        <text class="nav-desc">æŸ¥çœ‹æœ€æ–°è®­ç»ƒè®¡åˆ’</text>
      </view>
    </view>

    <view class="nav-item" bindtap="goToProfile">
      <view class="nav-icon">ğŸ‘¤</view>
      <view class="nav-content">
        <text class="nav-text">ä¸ªäººä¸­å¿ƒ</text>
        <text class="nav-desc">æŸ¥çœ‹å‡ºå‹¤è®°å½•</text>
      </view>
    </view>
  </view>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <view class="quick-actions" wx:if="{{isLoggedIn}}">
    <text class="section-title">å¿«é€Ÿæ“ä½œ</text>
    <view class="action-buttons">
      <button class="btn-secondary" bindtap="goToEventList">æŸ¥çœ‹è®­ç»ƒ</button>
      <button class="btn-secondary" wx:if="{{userInfo.role === 'admin'}}" bindtap="goToCreateEvent">åˆ›å»ºè®­ç»ƒ</button>
    </view>
  </view>
</view>
