# 故障排除指南

## 🔧 常见问题解决方案

### 1. 登录相关问题

#### 问题：点击登录按钮无反应
**可能原因**：
- 云开发环境配置错误
- 云函数未部署或部署失败
- 网络连接问题

**解决方案**：
1. 检查 `config/index.js` 中的云开发环境ID
2. 在云开发控制台验证 `user_service` 云函数状态
3. 查看开发者工具控制台错误信息
4. 重新部署云函数

#### 问题：登录后用户信息显示异常
**可能原因**：
- 数据库权限配置错误
- 用户数据结构不完整

**解决方案**：
1. 检查 `Users` 集合权限设置
2. 验证用户数据字段完整性
3. 清除本地缓存重新登录

### 2. 训练管理问题

#### 问题：无法创建训练活动
**可能原因**：
- 用户权限不足（非管理员）
- 云函数调用失败
- 数据验证失败

**解决方案**：
1. 确认用户角色为 `admin`
2. 检查 `event_service` 云函数日志
3. 验证输入数据格式正确性

#### 问题：训练列表加载失败
**可能原因**：
- 数据库查询权限问题
- 网络连接不稳定
- 数据格式异常

**解决方案**：
1. 检查 `Events` 集合权限设置
2. 重新加载页面
3. 查看云函数执行日志

### 3. 报名系统问题

#### 问题：无法报名或请假
**可能原因**：
- 重复操作防护触发
- 训练状态不允许报名
- 云函数执行异常

**解决方案**：
1. 检查训练状态是否为 `registering`
2. 确认用户未重复报名
3. 查看 `registration_service` 云函数日志

#### 问题：出勤状态更新失败
**可能原因**：
- 管理员权限验证失败
- 数据库更新异常
- 网络请求超时

**解决方案**：
1. 确认操作用户为管理员
2. 检查网络连接状态
3. 重试操作或刷新页面

### 4. 数据统计问题

#### 问题：统计数据显示不准确
**可能原因**：
- 数据计算逻辑错误
- 缓存数据过期
- 数据同步延迟

**解决方案**：
1. 清除本地缓存
2. 重新加载统计页面
3. 检查 `analytics_service` 云函数逻辑

### 5. 系统性能问题

#### 问题：页面加载缓慢
**可能原因**：
- 网络连接不佳
- 云函数冷启动
- 数据量过大

**解决方案**：
1. 检查网络连接状态
2. 优化数据查询条件
3. 实施分页加载

#### 问题：频繁出现错误提示
**可能原因**：
- 系统异常或bug
- 用户操作不当
- 数据异常

**解决方案**：
1. 查看 `error_reporter` 云函数日志
2. 记录错误复现步骤
3. 联系技术支持

## 🛠️ 调试工具

### 1. 开发者工具
- 使用微信开发者工具的调试功能
- 查看控制台错误信息
- 监控网络请求状态

### 2. 云开发控制台
- 查看云函数执行日志
- 监控数据库操作记录
- 检查资源使用情况

### 3. 系统监控
- 使用 `system_service` 进行健康检查
- 查看错误上报记录
- 监控系统性能指标

## 📞 技术支持

### 自助排查步骤
1. 查看相关文档说明
2. 检查系统配置是否正确
3. 尝试重启或重新部署
4. 查看错误日志定位问题

### 联系支持
如果问题无法自行解决，请提供以下信息：
- 问题详细描述
- 错误复现步骤
- 相关错误日志
- 系统环境信息

---

**建议**: 定期查看系统日志，及时发现和解决潜在问题。
