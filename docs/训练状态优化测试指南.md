# 训练状态优化测试指南

## 功能概述

本次优化实现了训练动态中心的状态显示和交互逻辑优化，主要包括：

1. **训练状态扩展**：新增"进行中"状态，训练状态流转为：报名中 → 进行中 → 已结束
2. **自动状态切换**：基于时间的自动状态管理，训练持续3小时
3. **界面动态更新**：根据训练状态动态显示不同的文字和样式
4. **交互逻辑优化**：训练进行中时阻止报名和请假操作

## 测试场景

### 1. 训练状态自动切换测试

#### 测试步骤：
1. 创建一个即将开始的训练（开始时间设置为当前时间后1-2分钟）
2. 观察首页训练卡片显示"下次训练"
3. 等待训练开始时间到达
4. 刷新页面，观察状态变化

#### 预期结果：
- **训练开始前**：
  - 首页显示"下次训练"
  - 倒计时显示剩余时间
  - 训练列表显示绿色"报名中"状态
  - 允许报名和请假操作

- **训练开始后（进行中）**：
  - 首页显示"训练进行中"
  - 倒计时区域显示"大家快来训练啦！"
  - 训练列表显示橙色"进行中"状态
  - 报名按钮点击后弹出提示"训练开始啦，下次记得提前报名哦"
  - 请假按钮点击后弹出提示"训练已经开始啦！"

- **训练结束后（3小时后）**：
  - 训练不再在首页显示
  - 训练列表显示灰色"已结束"状态

### 2. 报名功能交互测试

#### 测试步骤：
1. 在训练"报名中"状态时点击报名按钮
2. 等待训练状态变为"进行中"
3. 再次点击报名按钮

#### 预期结果：
- 报名中状态：正常报名成功
- 进行中状态：弹出提示"训练开始啦，下次记得提前报名哦"，阻止报名

### 3. 请假功能交互测试

#### 测试步骤：
1. 先报名参加训练
2. 在训练"报名中"状态时点击请假按钮
3. 等待训练状态变为"进行中"
4. 再次点击请假按钮

#### 预期结果：
- 报名中状态：正常请假成功
- 进行中状态：弹出提示"训练已经开始啦！"，阻止请假

### 4. 多页面状态一致性测试

#### 测试步骤：
1. 在不同页面间切换（首页、训练列表、训练详情）
2. 观察训练状态显示是否一致

#### 预期结果：
- 所有页面显示的训练状态应该一致
- 状态颜色和文字应该统一

### 5. 云函数服务端验证测试

#### 测试步骤：
1. 尝试通过API直接调用报名接口（绕过前端检查）
2. 在训练进行中时调用报名/请假接口

#### 预期结果：
- 服务端应该返回相应的错误提示
- 不允许在训练进行中进行报名或请假操作

## 样式验证

### 状态颜色规范：
- **报名中**：绿色 (#1AAD19)
- **进行中**：橙色 (#ff9800)
- **已结束**：灰色 (#666)

### 检查页面：
1. 首页训练卡片
2. 训练列表页面
3. 训练详情页面
4. 状态徽章组件

## 边界情况测试

### 1. 时间边界测试
- 训练开始时间的前后1分钟
- 训练结束时间（开始后3小时）的前后1分钟

### 2. 网络异常测试
- 网络断开时的状态更新
- 云函数调用失败时的处理

### 3. 并发操作测试
- 多用户同时操作时的状态一致性
- 状态切换过程中的操作处理

## 回归测试

确保以下原有功能正常：
1. 训练创建功能
2. 训练删除功能
3. 出勤管理功能
4. 用户打卡功能
5. 权限控制功能

## 性能测试

1. 页面加载速度
2. 状态更新响应时间
3. 云函数执行效率

## 注意事项

1. 测试时需要注意时区设置，确保时间计算正确
2. 建议使用测试环境进行完整测试
3. 关注用户体验，确保提示信息清晰易懂
4. 验证所有相关页面的状态显示一致性
